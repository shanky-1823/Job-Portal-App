<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>64.0</apiVersion>
    <description>Orchestrates the job application process from review to scheduling interviews.</description>
    <label>Job Application Orchestration</label>
    <orchestrationTriggers>
        <name>Application_Created_Or_Updated</name>
        <label>Application Created or Updated</label>
        <eventType>RecordCreateOrUpdate</eventType>
        <isRecordUpdated>true</isRecordUpdated>
        <isRecordCreated>true</isRecordCreated>
        <object>Application__c</object>
        <triggerType>Entry</triggerType>
    </orchestrationTriggers>
    <stages>
        <name>Application_Review_Stage</name>
        <label>Application Review</label>
        <steps>
            <name>Application_Review_Step</name>
            <label>Review Application</label>
            <type>Interactive</type>
            <action>
                <name>Application_Review_Screen_Flow</name>
                <flowReference>Application_Review_Screen_Flow</flowReference>
                <inputAssignments>
                    <name>recordId</name>
                    <value>
                        <elementReference>Application_Created_Or_Updated.Id</elementReference>
                    </value>
                </inputAssignments>
            </action>
            <assignments>
                <name>Assign_to_Hiring_Manager</name>
                <assignTo>
                    <roleOrUserOrQueue>
                        <type>Queue</type>
                        <name>Hiring_Managers_Queue</name>
                    </roleOrUserOrQueue>
                </assignTo>
            </assignments>
            <completion>
                <type>ScreenFlowCompletion</type>
            </completion>
        </steps>
    </stages>
    <stages>
        <name>Technical_Assessment_Stage</name>
        <label>Technical Assessment</label>
        <steps>
            <name>Send_Technical_Assessment_Step</name>
            <label>Send Assessment Email</label>
            <type>Background</type>
            <action>
                <name>Send_Technical_Assessment_Email</name>
                <flowReference>Send_Technical_Assessment_Email</flowReference>
                <inputAssignments>
                    <name>recordId</name>
                    <value>
                        <elementReference>Application_Created_Or_Updated.Id</elementReference>
                    </value>
                </inputAssignments>
            </action>
        </steps>
    </stages>
    <stages>
        <name>Interview_Scheduling_Stage</name>
        <label>Interview Scheduling</label>
        <steps>
            <name>Interview_Scheduling_Step</name>
            <label>Schedule Interview</label>
            <type>Interactive</type>
            <action>
                <name>Interview_Scheduling_Screen_Flow</name>
                <flowReference>Interview_Scheduling_Screen_Flow</flowReference>
                <inputAssignments>
                    <name>recordId</name>
                    <value>
                        <elementReference>Application_Created_Or_Updated.Id</elementReference>
                    </value>
                </inputAssignments>
            </action>
            <assignments>
                <name>Assign_to_Recruiter</name>
                <assignTo>
                    <roleOrUserOrQueue>
                        <type>Queue</type>
                        <name>Recruiters_Queue</name>
                    </roleOrUserOrQueue>
                </assignTo>
            </assignments>
            <completion>
                <type>ScreenFlowCompletion</type>
            </completion>
        </steps>
    </stages>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <triggerReference>Application_Created_Or_Updated</triggerReference>
    </start>
</Flow>